/* Mobile spacing and viewport fixes */

/* Legacy: removed */

/* Em telas menores, reduza a altura do banner para evitar espaço em branco */
@media (max-width: 820px) {

  /* Fallback genérico usando 100vh */
  .banner {
    /* legacy neutralized */
    min-height: auto !important;
  }
}

/* === Breakpoints consolidados e otimizados === */

/* 820px — tablets pequenos / celulares grandes */
@media (max-width: 820px) {
  /* Banner fluido e sem sobra vertical */
  .banner {
    height: auto !important;
    min-height: 92svh !important;
    margin-bottom: 0 !important;
    padding-bottom: 0 !important;
  }

  /* Encostar a galeria no banner */
  .banner + .galeria {
    margin-top: 0 !important;
    padding-top: 6px !important;
  }

  /* Anti-colapso de margens internas */
  .banner > *:last-child { margin-bottom: 0 !important; }
  .galeria > *:first-child { margin-top: 0 !important; }

  /* Dots do carrossel mais próximos do conteúdo */
  .banner .banner-dots { bottom: 12px !important; }
}

/* 414px — iPhone Plus / Galaxy S */
@media (max-width: 414px) {
  .banner { min-height: 90svh !important; }
  .banner + .galeria { padding-top: 4px !important; }
  .banner .banner-dots { bottom: 10px !important; }
}

/* 360px — Android básico */
@media (max-width: 360px) {
  .banner { min-height: 88svh !important; }
  .banner + .galeria { padding-top: 2px !important; }
  .banner .banner-dots { bottom: 9px !important; }
}

/* 320px — limite mínimo (iPhone SE) */
@media (max-width: 320px) {
  .banner { min-height: 85svh !important; }
  .banner + .galeria { margin-top: 0 !important; padding-top: 0 !important; }
  .banner .banner-dots { bottom: 8px !important; }
}

/* Preferir dvh quando suportado (mantendo svh como fallback acima) */
@supports (height: 100dvh) {
  @media (max-width: 820px)   { .banner { min-height: 92dvh !important; } }
  @media (max-width: 414px)   { .banner { min-height: 90dvh !important; } }
  @media (max-width: 360px)   { .banner { min-height: 88dvh !important; } }
  @media (max-width: 320px)   { .banner { min-height: 85dvh !important; } }
}

/* Legacy: removed per consolidated breakpoints */

/* Legacy spacing block removed (handled in consolidated breakpoints) */

/* Legacy 480px banner height rule removed */

/* Smooth anchor scrolling for a nicer feel */
html {
  scroll-behavior: smooth;
}

/* Improve touch and layout on small screens */
@media (max-width: 820px) {

  /* Larger tap target for the menu button */
  header .menu-toggle {
    width: 44px;
    height: 44px;
  }

  /* Ensure grid items don't overflow lines */
  .galeria .galeria-item {
    min-width: 0;
  }

  /* Slightly tighter gallery gaps on narrow devices */
  .galeria .galeria-grid {
    gap: 12px;
  }
}

/* Prevent swipe handler from blocking vertical scroll */
.banner .banner-wrapper {
  touch-action: pan-y;
}

/* Evita que qualquer banner estoure o layout */
.banner .banner-slide {
  overflow: hidden;
}

.banner .banner-slide img {
  width: 100%;
  height: 100%;
  object-fit: cover;
  display: block;
}

/* Anchor offset so section titles don't stick to top when using menu links */
section {
  scroll-margin-top: clamp(56px, var(--header-h, 72px), 96px);
}

/* Hint to browser to skip offscreen image work on lazy-loaded imgs */
img[loading="lazy"] {
  content-visibility: auto;
}

/* Requested: force 2 columns only for the first gallery and Halloween, all viewports */
#galeria .galeria-grid {
  grid-template-columns: repeat(2, 1fr) !important;
}

#temas-halloween .galeria-grid {
  grid-template-columns: repeat(2, 1fr) !important;
}

#temas-harry .galeria-grid {
  grid-template-columns: repeat(2, 1fr) !important;
}

/* Make gallery tiles perfectly uniform across devices */
.galeria .galeria-item {
  aspect-ratio: 1 / 1;
}

.galeria .galeria-item img {
  object-fit: cover !important;
}

#galeria .galeria-item img {
  object-fit: cover !important;
}

/* Casamento: 2 colunas e imagens inteiras (sem corte) */
#temas-casamento .galeria-grid {
  grid-template-columns: repeat(2, 1fr) !important;
}

#temas-casamento .galeria-item {
  aspect-ratio: 4 / 3;
}

#temas-casamento .galeria-item img {
  object-fit: contain !important;
}

/* ====== Footer ====== */
.site-footer {
  background: #FFE5E9;
  border-top: 1px solid var(--border);
  padding: 16px 0;
}

.site-footer .footer-container {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 16px;
}

.site-footer .footer-center .brand {
  font-family: 'Calistoga', serif;
  color: var(--brand-600);
  font-size: 22px;
}

.site-footer .footer-left small {
  color: var(--text-2);
  font-size: 12.5px;
}

.site-footer .footer-left a {
  color: var(--brand-600);
  text-decoration: none;
  border-bottom: 1px dotted var(--brand-600);
}

.site-footer .footer-left a:hover {
  color: var(--brand);
  border-bottom-color: transparent;
}

.site-footer .button {
  display: inline-block;
  border: 1px solid var(--brand);
  padding: 12px 20px;
  background: #C73250;
  color: white;
  text-decoration: none;
  border-radius: 12px;
}

.site-footer .button:hover {
  border-color: var(--brand-600);
  color: var(--brand-600);
  transform: scale(1.04);
  transition: .2s ease;
}

/* Footer mobile layout */
@media (max-width:820px) {
  .site-footer .footer-container {
    flex-direction: column;
    text-align: center;
  }

  .site-footer .footer-right {
    order: 3;
  }

  .site-footer .footer-center {
    order: 1;
  }

  .site-footer .footer-left {
    order: 2;
  }
}

/* === Breakpoints otimizados (legacy - disabled) === */

/* ====== 320px - limite mínimo (iPhone SE) ====== */
@media (max-width: 0px) { /* legacy disabled */
  .banner {
    height: auto !important;
    min-height: 85svh !important;
    margin-bottom: 0 !important;
    padding-bottom: 0 !important;
  }

  .banner+.galeria {
    margin-top: 0 !important;
    padding-top: 0 !important;
  }

  .banner .banner-content h1 {
    font-size: 16px !important;
  }

  .banner .banner-content p {
    font-size: 12.5px !important;
  }

  .banner .banner-btn {
    font-size: 12.5px !important;
    padding: 6px 10px;
  }
}

/* ====== 360px - Android básico ====== */
@media (max-width: 0px) { /* legacy disabled */
  .banner {
    min-height: 88svh !important;
  }

  .banner .banner-content h1 {
    font-size: 18px !important;
  }

  .banner .banner-content p {
    font-size: 13.5px !important;
  }

  .banner .banner-btn {
    font-size: 13px !important;
    padding: 7px 11px;
  }

  .banner+.galeria {
    padding-top: 2px !important;
  }
}

/* ====== 414px - iPhone Plus / Galaxy S ====== */
@media (max-width: 0px) { /* legacy disabled */
  .banner {
    min-height: 90svh !important;
  }

  .banner .banner-content h1 {
    font-size: 20px !important;
  }

  .banner .banner-content p {
    font-size: 14px !important;
  }

  .banner .banner-btn {
    font-size: 14px !important;
    padding: 8px 14px;
  }

  .banner+.galeria {
    padding-top: 4px !important;
  }
}

/* ====== 820px - tablets pequenos (modo retrato) ====== */
@media (max-width: 0px) { /* legacy disabled */
  .banner {
    min-height: 92svh !important;
    margin-bottom: 0 !important;
    padding-bottom: 0 !important;
  }

  .banner+.galeria {
    margin-top: 0 !important;
    padding-top: 6px !important;
  }

  .banner .banner-content h1 {
    font-size: clamp(22px, 5.2vw, 26px);
  }

  .banner .banner-content p {
    font-size: clamp(14px, 3.8vw, 18px);
  }
}

/* === Ajuste fino (legacy - disabled) === */
@media (max-width: 0px) {

  /* Banner ocupa apenas o necessário (sem sobra vertical) */
  .banner {
    height: auto !important;
    min-height: min(88svh, calc(100svh - var(--header-h, 0px))) !important;
    margin-bottom: 0 !important;
    padding-bottom: 0 !important;
  }

  /* Garante que o último elemento dentro do banner não empurre a galeria */
  .banner>*:last-child {
    margin-bottom: 0 !important;
  }

  /* Galeria encostada no banner, sem degrau */
  .banner+.galeria,
  .galeria {
    margin-top: 0 !important;
    padding-top: 2px !important;
  }

  /* Remove margem colapsada entre seções internas */
  .galeria>*:first-child {
    margin-top: 0 !important;
  }

  /* Ajuste de posição dos pontinhos do carrossel */
  .banner .banner-dots {
    bottom: 8px !important;
  }
}
